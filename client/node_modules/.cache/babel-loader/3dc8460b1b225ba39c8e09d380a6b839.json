{"ast":null,"code":"import axios from'axios';import setAuthToken from'../utils/setAuthToken';import jwtDecode from'jwt-decode';import{SET_CURRENT_USER}from'./types';export var loginUser=function loginUser(userData){return function(dispatch){console.log(userData);axios.post('/api/auth/login',userData).then(function(res){// save token to localStorage\nvar token=res.data.token;localStorage.setItem('squad',token);// set token to auth header\nsetAuthToken(token);// decode token to get user data\nvar decoded=jwtDecode(token);// set current user\ndispatch(setCurrentUser(decoded));});};};// register\nexport var registerUser=function registerUser(userData,history){return function(dispatch){console.log(userData);axios.post('/api/user',userData).then(function(res){history.push('/');}).catch(function(err){console.log(err);});};};// set user\nexport var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};// logout user\nexport var logoutUser=function logoutUser(){return function(dispatch){console.log('here');// remove token from localStorage\nlocalStorage.removeItem('squad');// remove auth header\nsetAuthToken(false);// set current user to {}\ndispatch(setCurrentUser({}));};};","map":{"version":3,"sources":["/Users/alecdown/apps/squad/client/src/actions/authActions.js"],"names":["axios","setAuthToken","jwtDecode","SET_CURRENT_USER","loginUser","userData","dispatch","console","log","post","then","res","token","data","localStorage","setItem","decoded","setCurrentUser","registerUser","history","push","catch","err","type","payload","logoutUser","removeItem"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CAEA,OAASC,gBAAT,KAAiC,SAAjC,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAC,QAAQ,QAAI,UAAAC,QAAQ,CAAI,CAC/CC,OAAO,CAACC,GAAR,CAAYH,QAAZ,EAEAL,KAAK,CAACS,IAAN,CAAW,iBAAX,CAA8BJ,QAA9B,EAAwCK,IAAxC,CAA6C,SAAAC,GAAG,CAAI,CAClD;AADkD,GAE1CC,CAAAA,KAF0C,CAEhCD,GAAG,CAACE,IAF4B,CAE1CD,KAF0C,CAGlDE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,KAA9B,EAEA;AACAX,YAAY,CAACW,KAAD,CAAZ,CAEA;AACA,GAAMI,CAAAA,OAAO,CAAGd,SAAS,CAACU,KAAD,CAAzB,CAEA;AACAN,QAAQ,CAACW,cAAc,CAACD,OAAD,CAAf,CAAR,CACD,CAbD,EAcD,CAjBgC,EAA1B,CAmBP;AACA,MAAO,IAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACb,QAAD,CAAWc,OAAX,QAAuB,UAAAb,QAAQ,CAAI,CAC7DC,OAAO,CAACC,GAAR,CAAYH,QAAZ,EAEAL,KAAK,CACFS,IADH,CACQ,WADR,CACqBJ,QADrB,EAEGK,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACXQ,OAAO,CAACC,IAAR,CAAa,GAAb,EACD,CAJH,EAKGC,KALH,CAKS,SAAAC,GAAG,CAAI,CACZf,OAAO,CAACC,GAAR,CAAYc,GAAZ,EACD,CAPH,EAQD,CAX2B,EAArB,CAaP;AACA,MAAO,IAAML,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAD,OAAO,CAAI,CACvC,MAAO,CACLO,IAAI,CAAEpB,gBADD,CAELqB,OAAO,CAAER,OAFJ,CAAP,CAID,CALM,CAOP;AACA,MAAO,IAAMS,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAAnB,QAAQ,CAAI,CAC1CC,OAAO,CAACC,GAAR,CAAY,MAAZ,EACA;AACAM,YAAY,CAACY,UAAb,CAAwB,OAAxB,EAEA;AACAzB,YAAY,CAAC,KAAD,CAAZ,CAEA;AACAK,QAAQ,CAACW,cAAc,CAAC,EAAD,CAAf,CAAR,CACD,CAVyB,EAAnB","sourcesContent":["import axios from 'axios';\nimport setAuthToken from '../utils/setAuthToken';\nimport jwtDecode from 'jwt-decode';\n\nimport { SET_CURRENT_USER } from './types';\n\nexport const loginUser = userData => dispatch => {\n  console.log(userData);\n\n  axios.post('/api/auth/login', userData).then(res => {\n    // save token to localStorage\n    const { token } = res.data;\n    localStorage.setItem('squad', token);\n\n    // set token to auth header\n    setAuthToken(token);\n\n    // decode token to get user data\n    const decoded = jwtDecode(token);\n\n    // set current user\n    dispatch(setCurrentUser(decoded));\n  });\n};\n\n// register\nexport const registerUser = (userData, history) => dispatch => {\n  console.log(userData);\n\n  axios\n    .post('/api/user', userData)\n    .then(res => {\n      history.push('/');\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\n// set user\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\n\n// logout user\nexport const logoutUser = () => dispatch => {\n  console.log('here');\n  // remove token from localStorage\n  localStorage.removeItem('squad');\n\n  // remove auth header\n  setAuthToken(false);\n\n  // set current user to {}\n  dispatch(setCurrentUser({}));\n};\n"]},"metadata":{},"sourceType":"module"}