{"ast":null,"code":"import axios from 'axios';\nimport setAuthToken from '../utils/setAuthToken';\nimport jwtDecode from 'jwt-decode';\nimport { SET_CURRENT_USER, GET_ERRORS } from './types';\nexport const loginUser = userData => dispatch => {\n  console.log(userData);\n  axios.post('/api/auth/login', userData).then(res => {\n    // save token to localStorage\n    const token = res.data.token;\n    localStorage.setItem('squad', token); // set token to auth header\n\n    setAuthToken(token); // decode token to get user data\n\n    const decoded = jwtDecode(token); // set current user\n\n    dispatch(setCurrentUser(decoded));\n  }).catch(err => {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  });\n}; // register\n\nexport const registerUser = (userData, history) => dispatch => {\n  console.log(userData);\n  axios.post('/api/user', userData).then(res => {\n    history.push('/');\n  }).catch(err => {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  });\n}; // set user\n\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n}; // logout user\n\nexport const logoutUser = () => dispatch => {\n  console.log('here'); // remove token from localStorage\n\n  localStorage.removeItem('squad'); // remove auth header\n\n  setAuthToken(false); // set current user to {}\n\n  dispatch(setCurrentUser({}));\n};","map":{"version":3,"sources":["/Users/alecdown/apps/squad/client/src/actions/authActions.js"],"names":["axios","setAuthToken","jwtDecode","SET_CURRENT_USER","GET_ERRORS","loginUser","userData","dispatch","console","log","post","then","res","token","data","localStorage","setItem","decoded","setCurrentUser","catch","err","type","payload","response","registerUser","history","push","logoutUser","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,SAA7C;AAEA,OAAO,MAAMC,SAAS,GAAGC,QAAQ,IAAIC,QAAQ,IAAI;AAC/CC,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AAEAN,EAAAA,KAAK,CACFU,IADH,CACQ,iBADR,EAC2BJ,QAD3B,EAEGK,IAFH,CAEQC,GAAG,IAAI;AACX;AADW,UAEHC,KAFG,GAEOD,GAAG,CAACE,IAFX,CAEHD,KAFG;AAGXE,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,KAA9B,EAHW,CAKX;;AACAZ,IAAAA,YAAY,CAACY,KAAD,CAAZ,CANW,CAQX;;AACA,UAAMI,OAAO,GAAGf,SAAS,CAACW,KAAD,CAAzB,CATW,CAWX;;AACAN,IAAAA,QAAQ,CAACW,cAAc,CAACD,OAAD,CAAf,CAAR;AACD,GAfH,EAgBGE,KAhBH,CAgBSC,GAAG,IAAI;AACZb,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAEjB,UADC;AAEPkB,MAAAA,OAAO,EAAEF,GAAG,CAACG,QAAJ,CAAaT;AAFf,KAAD,CAAR;AAID,GArBH;AAsBD,CAzBM,C,CA2BP;;AACA,OAAO,MAAMU,YAAY,GAAG,CAAClB,QAAD,EAAWmB,OAAX,KAAuBlB,QAAQ,IAAI;AAC7DC,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AAEAN,EAAAA,KAAK,CACFU,IADH,CACQ,WADR,EACqBJ,QADrB,EAEGK,IAFH,CAEQC,GAAG,IAAI;AACXa,IAAAA,OAAO,CAACC,IAAR,CAAa,GAAb;AACD,GAJH,EAKGP,KALH,CAKSC,GAAG,IAAI;AACZb,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAEjB,UADC;AAEPkB,MAAAA,OAAO,EAAEF,GAAG,CAACG,QAAJ,CAAaT;AAFf,KAAD,CAAR;AAID,GAVH;AAWD,CAdM,C,CAgBP;;AACA,OAAO,MAAMI,cAAc,GAAGD,OAAO,IAAI;AACvC,SAAO;AACLI,IAAAA,IAAI,EAAElB,gBADD;AAELmB,IAAAA,OAAO,EAAEL;AAFJ,GAAP;AAID,CALM,C,CAOP;;AACA,OAAO,MAAMU,UAAU,GAAG,MAAMpB,QAAQ,IAAI;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAD0C,CAE1C;;AACAM,EAAAA,YAAY,CAACa,UAAb,CAAwB,OAAxB,EAH0C,CAK1C;;AACA3B,EAAAA,YAAY,CAAC,KAAD,CAAZ,CAN0C,CAQ1C;;AACAM,EAAAA,QAAQ,CAACW,cAAc,CAAC,EAAD,CAAf,CAAR;AACD,CAVM","sourcesContent":["import axios from 'axios';\nimport setAuthToken from '../utils/setAuthToken';\nimport jwtDecode from 'jwt-decode';\n\nimport { SET_CURRENT_USER, GET_ERRORS } from './types';\n\nexport const loginUser = userData => dispatch => {\n  console.log(userData);\n\n  axios\n    .post('/api/auth/login', userData)\n    .then(res => {\n      // save token to localStorage\n      const { token } = res.data;\n      localStorage.setItem('squad', token);\n\n      // set token to auth header\n      setAuthToken(token);\n\n      // decode token to get user data\n      const decoded = jwtDecode(token);\n\n      // set current user\n      dispatch(setCurrentUser(decoded));\n    })\n    .catch(err => {\n      dispatch({\n        type: GET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\n// register\nexport const registerUser = (userData, history) => dispatch => {\n  console.log(userData);\n\n  axios\n    .post('/api/user', userData)\n    .then(res => {\n      history.push('/');\n    })\n    .catch(err => {\n      dispatch({\n        type: GET_ERRORS,\n        payload: err.response.data\n      });\n    });\n};\n\n// set user\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\n\n// logout user\nexport const logoutUser = () => dispatch => {\n  console.log('here');\n  // remove token from localStorage\n  localStorage.removeItem('squad');\n\n  // remove auth header\n  setAuthToken(false);\n\n  // set current user to {}\n  dispatch(setCurrentUser({}));\n};\n"]},"metadata":{},"sourceType":"module"}